<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>迴圈-成績輸入</title>
</head>

<body>
<!-- 題目 --- 
請輸入成績N次, 直到輸入-1時結束
並統計出如下
1.及格人數
2.不及格人數
3.全班總分
4.全班平均
測試資料如下
90
10
-2 => err！不是有效範圍0-100，請重新輸入！
30
100
a => err！非數字，請重新輸入！
66
-1 => 結束
-->

        <!-- 思考
        // 設置成績有效範圍0-100
        // 非數字無效 
        // 統計有效輸入次數(人數 == 及格 & 不及格)
        // 合計有效分數
        // 有效分數 / 總人數 = 平均
        -->

    <h1>成績計算結果</h1>
    <!-- 新增一個區塊來在HTML網頁的部分顯示結果 -->
    <div id="result"></div>
    <!-- 我想彈窗上面看完，同時把各項結果顯示在頁面 -->

    <script>
        // 及格分數
        var passCount = 0;
        // 不及格分數
        var failCount = 0;
        // 總和分數
        var totalScore = 0;
        // 學生人數
        var studentCount = 0;

        do {
            //存放輸入分數
            var grades = prompt("請輸入成績");
            if (grades === null) {
                pass = 0;
                fail = 0;
                tot = 0;
                avg = 0.0;
                alert("您按了取消，即將結束輸入！");
                break;
            } else if (grades.trim() === "") {
                alert("成績不能空白，請重新輸入");
                continue;
            } else if (isNaN(Number(grades))) {
                alert("err！非數字，請重新輸入！");
                continue;
            }
            //字串轉數字
            grades = Number(grades);

            if (grades === -1) {
                alert("成績輸入結束");
                break;
            } else if (grades < 0 || grades > 100) {
                alert("err！不是有效範圍0-100，請重新輸入！");
                continue;
            }

            //依輸入遞增學生人數
            studentCount++;
            totalScore += grades;
            
            //及格大於等於60分
            if (grades >= 60) {
                passCount++;
            } else {
                failCount++;
            }

        } while (true);

        if (studentCount > 0) {
            alert(
                "及格人數: " + passCount + "\n" +
                "不及格人數: " + failCount + "\n" +
                "全班總分: " + totalScore + "\n" +
                "全班平均: " + (totalScore / studentCount).toFixed(2)
            );
            var average = totalScore / studentCount;
            // 顯示結果到頁面
            var result = document.getElementById("result");
            result.innerHTML =
                "及格人數：" + passCount + "<br>" +
                "不及格人數：" + failCount + "<br>" +
                "全班總分：" + totalScore + "<br>" +
                "全班平均：" + average.toFixed(2) + "<br>";
        } else {
            alert("沒有有效成績輸入。");
        }
    </script>

</body>

</html>